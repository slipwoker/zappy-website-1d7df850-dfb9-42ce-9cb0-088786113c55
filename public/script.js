function hasConsentFor(e){return void 0!==window.CookieConsent&&window.CookieConsent.validConsent(e)}function withConsent(e,t){hasConsentFor(e)?t():console.log(`[WARNING] Skipping ${e} code - no user consent`)}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("mobileToggle"),t=document.getElementById("navMenu");if(e){e.addEventListener("click",function(){const e=this.querySelector(".hamburger-icon"),n=this.querySelector(".close-icon");this.classList.contains("active")?(e.style.display="block",n.style.display="none",this.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow=""):(e.style.display="none",n.style.display="block",this.classList.add("active"),t.classList.add("active"),document.body.style.overflow="hidden")});t.querySelectorAll("a").forEach(n=>{n.addEventListener("click",function(){const n=e.querySelector(".hamburger-icon"),o=e.querySelector(".close-icon");n.style.display="block",o.style.display="none",e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow=""})})}const n=document.querySelector(".phone-header-btn");n&&n.addEventListener("click",function(){window.location.href="tel:[business_phone]"});const o=document.getElementById("contactForm");o&&o.addEventListener("submit",function(e){e.preventDefault();const t=new FormData(o),n={};t.forEach((e,t)=>{n[t]=e}),console.log("Form submitted:",n),alert("×ª×•×“×” ×¢×œ ×¤× ×™×™×ª×š! × ×—×–×•×¨ ××œ×™×š ×‘×”×§×“× ×”××¤×©×¨×™."),o.reset()})}),function(){const e=window.ZAPPY_WEBSITE_ID;if(!e)return;const t="×”×¢×’×œ×” ×¨×™×§×”",n="×”×•×¡×£ ×œ×¢×’×œ×”",o="×”××•×¦×¨ × ×•×¡×£ ×œ×¢×’×œ×”!",i="×”×¡×¨",c="××™×Ÿ ××•×¦×¨×™× ×œ×”×¦×’×” ×›×¨×’×¢",a="×©×’×™××” ×‘×˜×¢×™× ×ª ××•×¦×¨×™×",s="â‚ª";let r=JSON.parse(localStorage.getItem("zappy_cart_"+e)||"[]");function d(){localStorage.setItem("zappy_cart_"+e,JSON.stringify(r)),l()}function l(){const e=document.querySelector(".cart-count");e&&(e.textContent=r.reduce((e,t)=>e+t.quantity,0))}function u(){const e=document.getElementById("cart-items"),n=document.getElementById("cart-total");if(!e)return;if(0===r.length)return e.innerHTML='<div class="empty-cart">'+t+"</div>",void(n&&(n.textContent=s+"0"));let o=0;e.innerHTML=r.map(e=>(o+=e.price*e.quantity,'<div class="cart-item"><img src="'+(e.images?.[0]||"")+'" alt="'+e.name+'"><div><strong>'+e.name+"</strong><br>"+s+e.price+" x "+e.quantity+"</div><button onclick=\"window.zappyRemoveFromCart('"+e.id+"')\">"+i+"</button></div>")).join(""),n&&(n.textContent=s+o)}window.zappyAddToCart=function(e){const t=r.find(t=>t.id===e.id);t?t.quantity++:r.push({...e,quantity:1}),d(),alert(o)},window.zappyRemoveFromCart=function(e){r=r.filter(t=>t.id!==e),d(),u()},document.addEventListener("DOMContentLoaded",function(){l(),async function(){const t=document.getElementById("zappy-product-grid");if(t)try{const o=await fetch("/api/ecommerce/products?websiteId="+e),i=await o.json();if(!i.success||!i.data?.length)return void(t.innerHTML='<div class="empty-cart">'+c+"</div>");t.innerHTML=i.data.map(e=>'<div class="product-card">'+(e.images?.[0]?'<img src="'+e.images[0]+'" alt="'+e.name+'">':'<div style="height:200px;background:#f0f0f0;border-radius:8px;"></div>')+"<h3>"+e.name+"</h3><p>"+(e.description||"").substring(0,100)+'</p><div class="price">'+s+e.price+'</div><button class="add-to-cart" onclick="window.zappyAddToCart('+JSON.stringify(e).replace(/"/g,"&quot;")+')">'+n+"</button></div>").join("")}catch(e){console.error("Failed to load products",e),t.innerHTML='<div class="empty-cart">'+a+"</div>"}}(),u()})}(),function(){"use strict";let e=0;function t(){if(e++,void 0===window.CookieConsent)return void(e<50&&setTimeout(t,100));const n=window.CookieConsent;try{n.run({autoShow:!0,mode:"opt-in",revision:0,categories:{necessary:{enabled:!0,readOnly:!0},analytics:{enabled:!1,readOnly:!1,autoClear:{cookies:[{name:"_ga"},{name:"_ga_*"},{name:"_gid"},{name:"_gat"}]}},marketing:{enabled:!1,readOnly:!1,autoClear:{cookies:[{name:"_fbp"},{name:"_fbc"},{name:"fr"}]}}},language:{default:"he",translations:{he:{consentModal:{title:"×× ×—× ×• ××©×ª××©×™× ×‘×¢×•×’×™×•×ª ğŸª",description:"××‘×•×˜×‘×•×œ ×‘×¨×’×™× ××©×ª××© ×‘×¢×•×’×™×•×ª ×›×“×™ ×œ×©×¤×¨ ××ª ×”×—×•×•×™×” ×©×œ×š, ×œ× ×ª×— ×©×™××•×© ×‘××ª×¨ ×•×œ×¡×™×™×¢ ×‘××××¦×™ ×”×©×™×•×•×§ ×©×œ× ×•.",acceptAllBtn:"××©×¨ ×”×›×œ",acceptNecessaryBtn:"×¨×§ ×”×›×¨×—×™",showPreferencesBtn:"× ×”×œ ×”×¢×“×¤×•×ª",footer:'<a href="#privacy-policy">××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª</a> | <a href="#terms-conditions">×ª× ××™ ×©×™××•×©</a>'},preferencesModal:{title:"×”×¢×“×¤×•×ª ×¢×•×’×™×•×ª",acceptAllBtn:"××©×¨ ×”×›×œ",acceptNecessaryBtn:"×¨×§ ×”×›×¨×—×™",savePreferencesBtn:"×©××•×¨ ×”×¢×“×¤×•×ª",closeIconLabel:"×¡×’×•×¨",sections:[{title:"×¢×•×’×™×•×ª ×—×™×•× ×™×•×ª",description:"×¢×•×’×™×•×ª ××œ×” ×”×›×¨×—×™×•×ª ×œ×ª×¤×§×•×“ ×”××ª×¨ ×•×œ× × ×™×ª×Ÿ ×œ×”×©×‘×™×ª ××•×ª×Ÿ.",linkedCategory:"necessary"},{title:"×¢×•×’×™×•×ª × ×™×ª×•×—",description:"×¢×•×’×™×•×ª ××œ×” ×¢×•×–×¨×•×ª ×œ× ×• ×œ×”×‘×™×Ÿ ××™×š ×”××‘×§×¨×™× ××ª×§×©×¨×™× ×¢× ×”××ª×¨ ×©×œ× ×•.",linkedCategory:"analytics"},{title:"×¢×•×’×™×•×ª ×©×™×•×•×§×™×•×ª",description:"×¢×•×’×™×•×ª ××œ×” ××©××©×•×ª ×œ×”×¦×’×ª ×¤×¨×¡×•××•×ª ××•×ª×××•×ª ××™×©×™×ª.",linkedCategory:"marketing"}]}}}},guiOptions:{consentModal:{layout:"box",position:"bottom right",equalWeightButtons:!0,flipButtons:!1},preferencesModal:{layout:"box",equalWeightButtons:!0,flipButtons:!1}}}),"function"==typeof n.onChange&&n.onChange(function(e,t){t.includes("analytics")&&n.validConsent("analytics"),t.includes("marketing")&&n.validConsent("marketing")})}catch(e){}}"loading"===document.readyState?(document.addEventListener("DOMContentLoaded",t),setTimeout(t,1e3)):"interactive"===document.readyState||"complete"===document.readyState?t():setTimeout(t,500),"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("load",t,{once:!0})}(),window.onload=function(){try{window.micAccessTool=new MicAccessTool({buttonPosition:"left",forceLang:"he-IL",icon:{position:{bottom:{size:50,units:"px"},left:{size:20,units:"px"},type:"fixed"},backgroundColor:"transparent",color:"transparent",img:"accessible",circular:!1},menu:{dimensions:{width:{size:300,units:"px"},height:{size:"auto",units:"px"}}}})}catch(e){}document.addEventListener("keydown",function(e){var t=e.altKey||e.metaKey,n=65===e.keyCode||65===e.which||e.key&&("a"===e.key.toLowerCase()||"Ã¥"===e.key||"Ã…"===e.key);t&&n&&(window.innerWidth>768&&(e.preventDefault(),e.stopPropagation(),document.body.classList.contains("accessibility-widget-visible")?document.body.classList.remove("accessibility-widget-visible"):(document.body.classList.add("accessibility-widget-visible"),setTimeout(function(){var e=document.getElementById("mic-access-tool-general-button");e&&e.click()},200))))},!0)},function(){function e(){console.log("ğŸ“§ Zappy: Initializing contact form API integration...");const e=document.querySelector(".contact-form")||document.querySelector('form[action*="contact"]')||document.querySelector("form#contact")||document.querySelector("form#contactForm")||document.getElementById("contactForm")||document.querySelector("section.contact form")||document.querySelector("section#contact form")||document.querySelector("form");if(!e)return void console.log("âš ï¸ Zappy: No contact form found on page");console.log("âœ… Zappy: Contact form found:",e.className||e.id||"unnamed form");e.onsubmit;e.addEventListener("submit",async function(e){const t=new FormData(this),n=Object.fromEntries(t);try{console.log("ğŸ“§ Zappy: Sending contact form to backend API...");const e=await fetch("http://localhost:5001/api/email/contact-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:"1d7df850-dfb9-42ce-9cb0-088786113c55",name:n.name||"",email:n.email||"",subject:n.subject||"Contact Form Submission",message:n.message||"",phone:n.phone||null})}),t=await e.json();t.success?console.log("âœ… Zappy: Contact form data sent successfully to backend"):console.log("âš ï¸ Zappy: Backend returned error:",t.error)}catch(e){console.error("âŒ Zappy: Failed to send to backend API:",e)}},!0),console.log("âœ… Zappy: Contact form API integration initialized")}window.zappyContactFormLoaded?console.log("ğŸ“§ Zappy contact form already loaded"):(window.zappyContactFormLoaded=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e())}();