function hasConsentFor(e){return void 0!==window.CookieConsent&&window.CookieConsent.validConsent(e)}function withConsent(e,t){hasConsentFor(e)?t():console.log(`[WARNING] Skipping ${e} code - no user consent`)}function getApiBase(){var e=(window.ZAPPY_API_BASE||"").replace(/\/$/,""),t=window.location?window.location.pathname:"";return-1!==t.indexOf("/preview")||-1!==t.indexOf("/preview-fullscreen")?window.location.origin:e}function buildApiUrl(e){"/"!==e.charAt(0)&&(e="/"+e);var t=getApiBase();return t?t+e:e}async function loadFeaturedProducts(){const e=document.getElementById("zappy-featured-products");if(!e)return;const t=window.ZAPPY_WEBSITE_ID;if(!t)return;const n={products:"××•×¦×¨×™×",ourProducts:"×”××•×¦×¨×™× ×©×œ× ×•",featuredProducts:"××•×¦×¨×™× ××•××œ×¦×™×",noFeaturedProducts:"×¢×•×“ ×œ× × ×‘×—×¨×• ××•×¦×¨×™× ××•××œ×¦×™×. ×¦×¤×• ×‘×›×œ ×”××•×¦×¨×™× ×©×œ× ×•!",all:"×”×›×œ",featured:"××•××œ×¦×™×",new:"×—×“×©×™×",sale:"××‘×¦×¢×™×",loadingProducts:"×˜×•×¢×Ÿ ××•×¦×¨×™×...",cart:"×¢×’×œ×ª ×§× ×™×•×ª",yourCart:"×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×š",emptyCart:"×”×¢×’×œ×” ×¨×™×§×”",total:'×¡×”"×›',proceedToCheckout:"×”××©×š ×œ×ª×©×œ×•×",checkout:"×ª×©×œ×•×",customerInfo:"×¤×¨×˜×™ ×œ×§×•×—",fullName:"×©× ××œ×",email:"××™××™×™×œ",phone:"×˜×œ×¤×•×Ÿ",shippingAddress:"×›×ª×•×‘×ª ×œ××©×œ×•×—",street:"×¨×—×•×‘ ×•××¡×¤×¨",city:"×¢×™×¨",zip:"××™×§×•×“",shippingMethod:"×©×™×˜×ª ××©×œ×•×—",loadingShipping:"×˜×•×¢×Ÿ ×©×™×˜×•×ª ××©×œ×•×—...",payment:"×ª×©×œ×•×",loadingPayment:"×˜×•×¢×Ÿ ××¤×©×¨×•×™×•×ª ×ª×©×œ×•×...",orderSummary:"×¡×™×›×•× ×”×–×× ×”",subtotal:"×¡×›×•× ×‘×™× ×™×™×",shipping:"××©×œ×•×—",discount:"×”× ×—×”",totalToPay:'×¡×”"×› ×œ×ª×©×œ×•×',placeOrder:"×‘×¦×¢ ×”×–×× ×”",login:"×”×ª×—×‘×¨×•×ª",customerLogin:"×”×ª×—×‘×¨×•×ª ×œ×§×•×—×•×ª",enterEmail:"×”×–×Ÿ ××ª ×›×ª×•×‘×ª ×”××™××™×™×œ ×©×œ×š ×•× ×©×œ×— ×œ×š ×§×•×“ ×”×ª×—×‘×¨×•×ª",emailAddress:"×›×ª×•×‘×ª ××™××™×™×œ",sendCode:"×©×œ×— ×§×•×“",enterCode:"×”×–×Ÿ ××ª ×”×§×•×“ ×©× ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",verificationCode:"×§×•×“ ××™××•×ª",verify:"×××ª",returnPolicy:"××“×™× ×™×•×ª ×”×—×–×¨×•×ª",addToCart:"×”×•×¡×£ ×œ×¢×’×œ×”",addedToCart:"×”××•×¦×¨ × ×•×¡×£ ×œ×¢×’×œ×”!",remove:"×”×¡×¨",noProducts:"××™×Ÿ ××•×¦×¨×™× ×œ×”×¦×’×” ×›×¨×’×¢",errorLoading:"×©×’×™××” ×‘×˜×¢×™× ×”",days:"×™××™×",currency:"â‚ª",free:"×—×™× ×",freeAbove:"××©×œ×•×— ×—×™× × ××¢×œ",noShippingMethods:"××™×Ÿ ××¤×©×¨×•×™×•×ª ××©×œ×•×— ×–××™× ×•×ª",viewAllResults:"×”×¦×’ ××ª ×›×œ ×”×ª×•×¦××•×ª",searchProducts:"×—×™×¤×•×© ××•×¦×¨×™×",productDetails:"×¤×¨×˜×™ ×”××•×¦×¨",viewDetails:"×œ×¤×¨×˜×™× × ×•×¡×¤×™×",inStock:"×‘××œ××™",outOfStock:"××–×œ ××”××œ××™",sku:'××§"×˜',category:"×§×˜×’×•×¨×™×”",relatedProducts:"××•×¦×¨×™× ×“×•××™×",productNotFound:"×”××•×¦×¨ ×œ× × ××¦×",backToProducts:"×—×–×¨×” ×œ××•×¦×¨×™×",quantity:"×›××•×ª",couponCode:"×§×•×“ ×§×•×¤×•×Ÿ",enterCouponCode:"×”×–×Ÿ ×§×•×“ ×§×•×¤×•×Ÿ",applyCoupon:"×”×—×œ",removeCoupon:"×”×¡×¨",couponApplied:"×”×§×•×¤×•×Ÿ ×”×•×—×œ ×‘×”×¦×œ×—×”!",invalidCoupon:"×§×•×“ ×§×•×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ",couponExpired:"×”×§×•×¤×•×Ÿ ×¤×’ ×ª×•×§×£",couponMinOrder:"×¡×›×•× ×”×–×× ×” ××™× ×™××œ×™"};try{const o=await fetch(buildApiUrl("/api/ecommerce/storefront/products?websiteId="+t+"&featured=true&limit=6")),i=await o.json();if(!i.success||!i.data?.length)return void(e.innerHTML='<div class="no-featured-products">'+(n.noFeaturedProducts||"No featured products yet. Check out all our products!")+"</div>");renderProductGrid(e,i.data,n)}catch(t){console.error("Failed to load featured products",t),e.innerHTML='<div class="empty-cart">'+n.errorLoading+"</div>"}}function renderProductGrid(e,t,n){e.innerHTML=t.map(e=>'<div class="product-card"><a href="/product/'+(e.slug||e.id)+'" class="product-card-link">'+(e.images?.[0]?'<img src="'+e.images[0]+'" alt="'+e.name+'">':'<div style="height:200px;background:#f0f0f0;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#999;">ğŸ“¦</div>')+"<h3>"+e.name+"</h3><p>"+(e.description||"").substring(0,80)+(e.description?.length>80?"...":"")+'</p><div class="price">'+n.currency+e.price+'</div></a><button class="add-to-cart" onclick="event.stopPropagation(); window.zappyAddToCart('+JSON.stringify(e).replace(/"/g,"&quot;")+')">'+n.addToCart+"</button></div>").join("")}async function loadCatalogCategories(){const e=document.getElementById("zappy-category-links"),t=document.getElementById("zappy-nav-category-links");if(!e&&!t)return;const n=window.ZAPPY_WEBSITE_ID;if(n)try{const o=await fetch(buildApiUrl("/api/ecommerce/storefront/categories?websiteId="+n)),i=await o.json();if(!i.success||!i.data?.length)return;const a=i.data.map(e=>'<li data-category-id="'+e.id+'"><a href="/products?category='+e.id+'">'+e.name+"</a></li>").join(""),c=i.data.map(e=>'<a href="/products?category='+e.id+'" class="catalog-menu-item" data-category-id="'+e.id+'">'+e.name+"</a>").join("");t&&(t.querySelectorAll("li[data-category-id]").forEach(function(e){e.remove()}),t.insertAdjacentHTML("beforeend",a)),e&&(e.querySelectorAll("[data-category-id]").forEach(function(e){e.remove()}),e.insertAdjacentHTML("beforeend",c))}catch(e){console.error("Failed to load categories",e)}}async function loadProductDetailPage(){const e=document.getElementById("product-detail");if(!e)return;const t=window.ZAPPY_WEBSITE_ID;if(!t)return;const n={products:"××•×¦×¨×™×",ourProducts:"×”××•×¦×¨×™× ×©×œ× ×•",featuredProducts:"××•×¦×¨×™× ××•××œ×¦×™×",noFeaturedProducts:"×¢×•×“ ×œ× × ×‘×—×¨×• ××•×¦×¨×™× ××•××œ×¦×™×. ×¦×¤×• ×‘×›×œ ×”××•×¦×¨×™× ×©×œ× ×•!",all:"×”×›×œ",featured:"××•××œ×¦×™×",new:"×—×“×©×™×",sale:"××‘×¦×¢×™×",loadingProducts:"×˜×•×¢×Ÿ ××•×¦×¨×™×...",cart:"×¢×’×œ×ª ×§× ×™×•×ª",yourCart:"×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×š",emptyCart:"×”×¢×’×œ×” ×¨×™×§×”",total:'×¡×”"×›',proceedToCheckout:"×”××©×š ×œ×ª×©×œ×•×",checkout:"×ª×©×œ×•×",customerInfo:"×¤×¨×˜×™ ×œ×§×•×—",fullName:"×©× ××œ×",email:"××™××™×™×œ",phone:"×˜×œ×¤×•×Ÿ",shippingAddress:"×›×ª×•×‘×ª ×œ××©×œ×•×—",street:"×¨×—×•×‘ ×•××¡×¤×¨",city:"×¢×™×¨",zip:"××™×§×•×“",shippingMethod:"×©×™×˜×ª ××©×œ×•×—",loadingShipping:"×˜×•×¢×Ÿ ×©×™×˜×•×ª ××©×œ×•×—...",payment:"×ª×©×œ×•×",loadingPayment:"×˜×•×¢×Ÿ ××¤×©×¨×•×™×•×ª ×ª×©×œ×•×...",orderSummary:"×¡×™×›×•× ×”×–×× ×”",subtotal:"×¡×›×•× ×‘×™× ×™×™×",shipping:"××©×œ×•×—",discount:"×”× ×—×”",totalToPay:'×¡×”"×› ×œ×ª×©×œ×•×',placeOrder:"×‘×¦×¢ ×”×–×× ×”",login:"×”×ª×—×‘×¨×•×ª",customerLogin:"×”×ª×—×‘×¨×•×ª ×œ×§×•×—×•×ª",enterEmail:"×”×–×Ÿ ××ª ×›×ª×•×‘×ª ×”××™××™×™×œ ×©×œ×š ×•× ×©×œ×— ×œ×š ×§×•×“ ×”×ª×—×‘×¨×•×ª",emailAddress:"×›×ª×•×‘×ª ××™××™×™×œ",sendCode:"×©×œ×— ×§×•×“",enterCode:"×”×–×Ÿ ××ª ×”×§×•×“ ×©× ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",verificationCode:"×§×•×“ ××™××•×ª",verify:"×××ª",returnPolicy:"××“×™× ×™×•×ª ×”×—×–×¨×•×ª",addToCart:"×”×•×¡×£ ×œ×¢×’×œ×”",addedToCart:"×”××•×¦×¨ × ×•×¡×£ ×œ×¢×’×œ×”!",remove:"×”×¡×¨",noProducts:"××™×Ÿ ××•×¦×¨×™× ×œ×”×¦×’×” ×›×¨×’×¢",errorLoading:"×©×’×™××” ×‘×˜×¢×™× ×”",days:"×™××™×",currency:"â‚ª",free:"×—×™× ×",freeAbove:"××©×œ×•×— ×—×™× × ××¢×œ",noShippingMethods:"××™×Ÿ ××¤×©×¨×•×™×•×ª ××©×œ×•×— ×–××™× ×•×ª",viewAllResults:"×”×¦×’ ××ª ×›×œ ×”×ª×•×¦××•×ª",searchProducts:"×—×™×¤×•×© ××•×¦×¨×™×",productDetails:"×¤×¨×˜×™ ×”××•×¦×¨",viewDetails:"×œ×¤×¨×˜×™× × ×•×¡×¤×™×",inStock:"×‘××œ××™",outOfStock:"××–×œ ××”××œ××™",sku:'××§"×˜',category:"×§×˜×’×•×¨×™×”",relatedProducts:"××•×¦×¨×™× ×“×•××™×",productNotFound:"×”××•×¦×¨ ×œ× × ××¦×",backToProducts:"×—×–×¨×” ×œ××•×¦×¨×™×",quantity:"×›××•×ª",couponCode:"×§×•×“ ×§×•×¤×•×Ÿ",enterCouponCode:"×”×–×Ÿ ×§×•×“ ×§×•×¤×•×Ÿ",applyCoupon:"×”×—×œ",removeCoupon:"×”×¡×¨",couponApplied:"×”×§×•×¤×•×Ÿ ×”×•×—×œ ×‘×”×¦×œ×—×”!",invalidCoupon:"×§×•×“ ×§×•×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ",couponExpired:"×”×§×•×¤×•×Ÿ ×¤×’ ×ª×•×§×£",couponMinOrder:"×¡×›×•× ×”×–×× ×” ××™× ×™××œ×™"};let o=window.location.pathname;const i=new URLSearchParams(window.location.search).get("page");i&&(o=i);const a=o.split("/"),c=a[a.length-1];if(c&&"product"!==c){console.log("Loading product with slug:",c);try{const o=await fetch(buildApiUrl("/api/ecommerce/storefront/products/"+encodeURIComponent(c)+"?websiteId="+t)),i=await o.json();if(!i.success||!i.data)return void showProductNotFound(e,n);const a=i.data;renderProductDetail(e,a,n),document.title=a.name+" - "+(document.title.split(" - ").pop()||""),loadRelatedProducts(a,n)}catch(t){console.error("Failed to load product",t),showProductNotFound(e,n)}}else showProductNotFound(e,n)}function showProductNotFound(e,t){e.innerHTML=`\n    <div class="product-not-found">\n      <h2>${t.productNotFound}</h2>\n      <a href="/products" class="btn btn-primary">${t.backToProducts}</a>\n    </div>\n  `}function renderProductDetail(e,t,n){const o=t.images||[],i=o[0]||"",a=o.length>1,c="out_of_stock"!==t.stock_status,r=t.sale_price&&parseFloat(t.sale_price)<parseFloat(t.price);e.innerHTML=`\n    <a href="/products" class="back-to-products">\n      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>\n      ${n.backToProducts}\n    </a>\n    <div class="product-detail-container">\n      <div class="product-gallery">\n        ${i?'<img src="'+i+'" alt="'+t.name+'" class="product-gallery-main" id="product-main-image">':'<div class="product-gallery-main" style="display:flex;align-items:center;justify-content:center;color:#999;font-size:64px;">ğŸ“¦</div>'}\n        ${a?`\n          <div class="product-gallery-thumbs">\n            ${o.map((e,n)=>`\n              <img src="${e}" alt="${t.name}" class="product-gallery-thumb ${0===n?"active":""}" onclick="changeMainImage(this, '${e}')" />\n            `).join("")}\n          </div>\n        `:""}\n      </div>\n      <div class="product-info">\n        <h1>${t.name}</h1>\n        ${t.category_name?'<span class="product-category">'+t.category_name+"</span>":""}\n        <div class="product-price">\n          ${r?n.currency+t.sale_price+'<span class="original-price">'+n.currency+t.price+"</span>":n.currency+t.price}\n        </div>\n        ${t.sku?'<div class="product-sku">'+n.sku+": "+t.sku+"</div>":""}\n        <div class="product-stock ${c?"in-stock":"out-of-stock"}">\n          ${c?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>'+n.inStock:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>'+n.outOfStock}\n        </div>\n        ${t.description?'<div class="product-description">'+t.description+"</div>":""}\n        <div class="product-quantity">\n          <label>${n.quantity}:</label>\n          <div class="quantity-selector">\n            <button type="button" onclick="adjustQuantity(-1)">âˆ’</button>\n            <input type="number" id="product-quantity" value="1" min="1" max="99">\n            <button type="button" onclick="adjustQuantity(1)">+</button>\n          </div>\n        </div>\n        <div class="product-actions">\n          <button class="add-to-cart" onclick="addProductToCart()" ${c?"":'disabled style="opacity:0.5;cursor:not-allowed;"'}>\n            ${n.addToCart}\n          </button>\n        </div>\n      </div>\n    </div>\n  `,window.currentProduct=t}function changeMainImage(e,t){const n=document.getElementById("product-main-image");n&&(n.src=t),document.querySelectorAll(".product-gallery-thumb").forEach(e=>e.classList.remove("active")),e.classList.add("active")}function adjustQuantity(e){const t=document.getElementById("product-quantity");if(!t)return;const n=Math.max(1,Math.min(99,parseInt(t.value||1)+e));t.value=n}function addProductToCart(){const e=window.currentProduct;if(!e)return;const t=parseInt(document.getElementById("product-quantity")?.value||1);for(let n=0;n<t;n++)window.zappyAddToCart(e)}async function loadRelatedProducts(e,t){const n=document.getElementById("related-products-section"),o=document.getElementById("related-products-grid");if(!n||!o)return;const i=window.ZAPPY_WEBSITE_ID;try{let a=buildApiUrl("/api/ecommerce/storefront/products?websiteId="+i+"&limit=4");e.category_id&&(a+="&categoryId="+e.category_id);const c=await fetch(a),r=await c.json();if(!r.success||!r.data?.length)return;const s=r.data.filter(t=>t.id!==e.id).slice(0,4);if(0===s.length)return;renderProductGrid(o,s,t),n.style.display="block"}catch(e){console.error("Failed to load related products",e)}}window.zappyContactFormLoaded?console.log("âš ï¸ Zappy: Contact form handler already loaded, skipping duplicate injection"):window.zappyContactFormLoaded=!0,document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("mobileToggle"),t=document.getElementById("navMenu");if(e){e.addEventListener("click",function(){const e=this.querySelector(".hamburger-icon"),n=this.querySelector(".close-icon");this.classList.contains("active")?(e.style.display="block",n.style.display="none",this.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow=""):(e.style.display="none",n.style.display="block",this.classList.add("active"),t.classList.add("active"),document.body.style.overflow="hidden")});t.querySelectorAll("a").forEach(n=>{n.addEventListener("click",function(){const n=e.querySelector(".hamburger-icon"),o=e.querySelector(".close-icon");n.style.display="block",o.style.display="none",e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow=""})})}const n=document.querySelector(".phone-header-btn");n&&n.addEventListener("click",function(){window.location.href="tel:[business_phone]"});const o=document.getElementById("contactForm");o&&o.addEventListener("submit",async function(e){e.preventDefault();const t=new FormData(this),n={};for(let[e,o]of t.entries())n[e]=o;if(window.zappyContactFormLoaded)try{console.log("ğŸ“§ Zappy: Sending contact form to backend...");const e={websiteId:"1d7df850-dfb9-42ce-9cb0-088786113c55",name:n.name||n.fullname||n.fullName||"",email:n.email||"",subject:n.subject||"Contact Form Submission",message:n.message||n.comments||n.details||"",phone:n.phone||n.telephone||n.mobile||null},t=await fetch("https://qaapi.zappy5.com/api/email/contact-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json();console.log("âœ… Zappy: Email sent successfully",e)}else console.log("âš ï¸ Zappy: API returned non-OK status",t.status)}catch(e){console.error("âŒ Zappy: Failed to send email",e)}else console.log("âš ï¸ Zappy: Contact form handler not properly initialized");alert("×ª×•×“×” ×¢×œ ×¤× ×™×™×ª×š! × ×™×¦×•×¨ ××™×ª×š ×§×©×¨ ×‘×”×§×“×."),o.reset()})}),function(){"use strict";let e=0;function t(){if(e++,void 0===window.CookieConsent)return void(e<50&&setTimeout(t,100));const n=window.CookieConsent;try{n.run({autoShow:!0,mode:"opt-in",revision:0,categories:{necessary:{enabled:!0,readOnly:!0},analytics:{enabled:!1,readOnly:!1,autoClear:{cookies:[{name:"_ga"},{name:"_ga_*"},{name:"_gid"},{name:"_gat"}]}},marketing:{enabled:!1,readOnly:!1,autoClear:{cookies:[{name:"_fbp"},{name:"_fbc"},{name:"fr"}]}}},language:{default:"he",translations:{he:{consentModal:{title:"×× ×—× ×• ××©×ª××©×™× ×‘×¢×•×’×™×•×ª ğŸª",description:"××‘×•×˜×‘×•×œ ×‘×¨×’×™× ××©×ª××© ×‘×¢×•×’×™×•×ª ×›×“×™ ×œ×©×¤×¨ ××ª ×”×—×•×•×™×” ×©×œ×š, ×œ× ×ª×— ×©×™××•×© ×‘××ª×¨ ×•×œ×¡×™×™×¢ ×‘××××¦×™ ×”×©×™×•×•×§ ×©×œ× ×•.",acceptAllBtn:"××©×¨ ×”×›×œ",acceptNecessaryBtn:"×¨×§ ×”×›×¨×—×™",showPreferencesBtn:"× ×”×œ ×”×¢×“×¤×•×ª",footer:'<a href="#privacy-policy">××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª</a> | <a href="#terms-conditions">×ª× ××™ ×©×™××•×©</a>'},preferencesModal:{title:"×”×¢×“×¤×•×ª ×¢×•×’×™×•×ª",acceptAllBtn:"××©×¨ ×”×›×œ",acceptNecessaryBtn:"×¨×§ ×”×›×¨×—×™",savePreferencesBtn:"×©××•×¨ ×”×¢×“×¤×•×ª",closeIconLabel:"×¡×’×•×¨",sections:[{title:"×¢×•×’×™×•×ª ×—×™×•× ×™×•×ª",description:"×¢×•×’×™×•×ª ××œ×” ×”×›×¨×—×™×•×ª ×œ×ª×¤×§×•×“ ×”××ª×¨ ×•×œ× × ×™×ª×Ÿ ×œ×”×©×‘×™×ª ××•×ª×Ÿ.",linkedCategory:"necessary"},{title:"×¢×•×’×™×•×ª × ×™×ª×•×—",description:"×¢×•×’×™×•×ª ××œ×” ×¢×•×–×¨×•×ª ×œ× ×• ×œ×”×‘×™×Ÿ ××™×š ×”××‘×§×¨×™× ××ª×§×©×¨×™× ×¢× ×”××ª×¨ ×©×œ× ×•.",linkedCategory:"analytics"},{title:"×¢×•×’×™×•×ª ×©×™×•×•×§×™×•×ª",description:"×¢×•×’×™×•×ª ××œ×” ××©××©×•×ª ×œ×”×¦×’×ª ×¤×¨×¡×•××•×ª ××•×ª×××•×ª ××™×©×™×ª.",linkedCategory:"marketing"}]}}}},guiOptions:{consentModal:{layout:"box",position:"bottom right",equalWeightButtons:!0,flipButtons:!1},preferencesModal:{layout:"box",equalWeightButtons:!0,flipButtons:!1}}}),"function"==typeof n.onChange&&n.onChange(function(e,t){t.includes("analytics")&&n.validConsent("analytics"),t.includes("marketing")&&n.validConsent("marketing")})}catch(e){}}"loading"===document.readyState?(document.addEventListener("DOMContentLoaded",t),setTimeout(t,1e3)):"interactive"===document.readyState||"complete"===document.readyState?t():setTimeout(t,500),"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("load",t,{once:!0})}(),window.onload=function(){try{window.micAccessTool=new MicAccessTool({buttonPosition:"left",forceLang:"he-IL",icon:{position:{bottom:{size:50,units:"px"},left:{size:20,units:"px"},type:"fixed"},backgroundColor:"transparent",color:"transparent",img:"accessible",circular:!1},menu:{dimensions:{width:{size:300,units:"px"},height:{size:"auto",units:"px"}}}})}catch(e){}document.addEventListener("keydown",function(e){var t=e.altKey||e.metaKey,n=65===e.keyCode||65===e.which||e.key&&("a"===e.key.toLowerCase()||"Ã¥"===e.key||"Ã…"===e.key);t&&n&&(window.innerWidth>768&&(e.preventDefault(),e.stopPropagation(),document.body.classList.contains("accessibility-widget-visible")?document.body.classList.remove("accessibility-widget-visible"):(document.body.classList.add("accessibility-widget-visible"),setTimeout(function(){var e=document.getElementById("mic-access-tool-general-button");e&&e.click()},200))))},!0)},function(){const e=window.ZAPPY_WEBSITE_ID,t=function(e){"/"!==e.charAt(0)&&(e="/"+e);const t=function(){const e=(window.ZAPPY_API_BASE||"").replace(/\/$/,""),t=window.location?window.location.pathname:"";return-1!==t.indexOf("/preview")||-1!==t.indexOf("/preview-fullscreen")?window.location.origin:e}();return t?t+e:e};if(!e)return;const n="×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×š",o="×”×¢×’×œ×” ×¨×™×§×”",i='×¡×”"×›',a="×”××©×š ×œ×ª×©×œ×•×",c="×‘×¦×¢ ×”×–×× ×”",r="×”×•×¡×£ ×œ×¢×’×œ×”",s="×”×¡×¨",d="××™×Ÿ ××•×¦×¨×™× ×œ×”×¦×’×” ×›×¨×’×¢",l="×©×’×™××” ×‘×˜×¢×™× ×”",u="×™××™×",p="â‚ª",m="×—×™× ×",y="××©×œ×•×— ×—×™× × ××¢×œ",g="××™×Ÿ ××¤×©×¨×•×™×•×ª ××©×œ×•×— ×–××™× ×•×ª",v="×”×¦×’ ××ª ×›×œ ×”×ª×•×¦××•×ª",f="×”×—×œ",h="×§×•×“ ×§×•×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ",w="×”×§×•×¤×•×Ÿ ×¤×’ ×ª×•×§×£",b="×¡×›×•× ×”×–×× ×” ××™× ×™××œ×™",E="â‚ª"===p||"rtl"===document.documentElement.dir||"rtl"===document.body.dir;let k=JSON.parse(localStorage.getItem("zappy_cart_"+e)||"[]");function L(){localStorage.setItem("zappy_cart_"+e,JSON.stringify(k)),C(),I()}function C(){const e=k.reduce((e,t)=>e+t.quantity,0);document.querySelectorAll(".cart-count").forEach(function(t){t.textContent=e})}function I(){const e=document.getElementById("cart-drawer-items"),t=document.getElementById("cart-drawer-total");if(!e)return;if(0===k.length)return e.innerHTML='<div class="empty-cart"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg><p>'+o+"</p></div>",void(t&&(t.textContent=p+"0"));let n=0;e.innerHTML=k.map(e=>(n+=e.price*e.quantity,'<div class="cart-item" data-item-id="'+e.id+'"><img src="'+(e.images?.[0]||"data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2270%22 height=%2270%22 viewBox=%220 0 70 70%22%3E%3Crect fill=%22%23f3f4f6%22 width=%2270%22 height=%2270%22/%3E%3Cpath fill=%22%239ca3af%22 d=%22M28 25h14v14H28z%22/%3E%3C/svg%3E")+'" alt="'+e.name+'"><div class="cart-item-info"><div class="cart-item-name">'+e.name+'</div><div class="cart-item-price">'+p+(e.price*e.quantity).toFixed(2)+'</div><div class="cart-item-qty"><button onclick="window.zappyUpdateQty(\''+e.id+"', -1)\">âˆ’</button><span>"+e.quantity+"</span><button onclick=\"window.zappyUpdateQty('"+e.id+'\', 1)">+</button></div></div><button class="cart-item-remove" onclick="window.zappyRemoveFromCart(\''+e.id+'\')"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg></button></div>')).join(""),t&&(t.textContent=p+n.toFixed(2))}function B(){var e=document.getElementById("cart-drawer"),t=document.getElementById("cart-drawer-overlay");if(!e){var c='<div class="cart-drawer-overlay" id="cart-drawer-overlay"></div><aside class="cart-drawer" id="cart-drawer"><div class="cart-drawer-header"><h2>'+n+'</h2><button type="button" class="cart-drawer-close" id="cart-drawer-close"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg></button></div><div class="cart-drawer-body" id="cart-drawer-items"><div class="empty-cart">'+o+'</div></div><div class="cart-drawer-footer"><div class="cart-drawer-total"><span>'+i+':</span><span id="cart-drawer-total">'+p+'0</span></div><a href="/checkout" class="cart-drawer-checkout">'+a+"</a></div></aside>";document.body.insertAdjacentHTML("beforeend",c),e=document.getElementById("cart-drawer"),t=document.getElementById("cart-drawer-overlay");var r=document.getElementById("cart-drawer-close");r&&r.addEventListener("click",P),t&&t.addEventListener("click",P)}e&&(e.classList.add("active"),document.body.style.overflow="hidden"),t&&t.classList.add("active"),I()}function P(){var e=document.getElementById("cart-drawer"),t=document.getElementById("cart-drawer-overlay");e&&e.classList.remove("active"),t&&t.classList.remove("active"),document.body.style.overflow=""}function T(){const e=document.getElementById("cart-items"),t=document.getElementById("cart-total");if(!e)return;if(0===k.length)return e.innerHTML='<div class="empty-cart">'+o+"</div>",void(t&&(t.textContent=p+"0"));let n=0;e.innerHTML=k.map(e=>(n+=e.price*e.quantity,'<div class="cart-item"><img src="'+(e.images?.[0]||"")+'" alt="'+e.name+'"><div><strong>'+e.name+"</strong><br>"+p+e.price+" x "+e.quantity+"</div><button onclick=\"window.zappyRemoveFromCart('"+e.id+"')\">"+s+"</button></div>")).join(""),t&&(t.textContent=p+n)}window.zappyUpdateQty=function(e,t){const n=k.find(t=>t.id===e);n&&(n.quantity+=t,n.quantity<=0&&(k=k.filter(t=>t.id!==e)),L(),I())};let S=null,x=[];let M=null,A=[],q=!1;window.zappySelectPayment=function(e){M=A.find(t=>t.id===e),document.querySelectorAll(".payment-option").forEach(t=>{t.classList.toggle("selected",t.dataset.methodId===e)})};let _=null,F=0;function z(){return k.reduce((e,t)=>e+t.price*t.quantity,0)}function j(){const e=document.getElementById("subtotal"),t=document.getElementById("shipping-cost"),n=document.getElementById("discount"),o=document.getElementById("discount-row"),i=document.getElementById("order-total"),a=document.getElementById("order-items"),c=z();let r=function(){if(!S)return 0;const e=z();return S.conditions?.freeAbove&&e>=S.conditions.freeAbove?0:parseFloat(S.price)||0}();_&&("percentage"===_.type?F=c*_.value/100:"fixed"===_.type?F=_.value:"free_shipping"===_.type&&(F=0,r=0),F>c&&(F=c));const s=c+r-F;e&&(e.textContent=p+c.toFixed(2)),t&&(t.textContent=0===r?m||"FREE":p+r.toFixed(2)),o&&n&&(F>0?(o.style.display="block",n.textContent="-"+p+F.toFixed(2)):o.style.display="none"),i&&(i.textContent=p+s.toFixed(2)),a&&(a.innerHTML=k.map(e=>'<div class="order-item"><span>'+e.name+" x "+e.quantity+"</span><span>"+p+(e.price*e.quantity).toFixed(2)+"</span></div>").join(""))}window.zappySelectShipping=function(e){S=x.find(t=>t.id===e),document.querySelectorAll(".shipping-option").forEach(t=>{t.classList.toggle("selected",t.dataset.methodId===e)}),j()},window.zappyAddToCart=function(e){const t=k.find(t=>t.id===e.id);t?t.quantity++:k.push({...e,quantity:1}),L(),B()},window.zappyRemoveFromCart=function(e){k=k.filter(t=>t.id!==e),L(),T()};let H=[],O=null;function N(e){if(!e||e.length<2)return[];const t=e.toLowerCase();return H.filter(e=>e.name?.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)||e.sku?.toLowerCase().includes(t)||e.tags?.some(e=>e.toLowerCase().includes(t))).slice(0,6)}function D(){const n=document.getElementById("nav-search-input"),o=document.getElementById("nav-search-btn"),i=document.getElementById("nav-search-results");if(n&&(async function(){try{const n=await fetch(t("/api/ecommerce/storefront/products?websiteId="+e)),o=await n.json();o.success&&o.data&&(H=o.data)}catch(e){console.error("Failed to load products for search",e)}}(),n.addEventListener("input",function(){const e=this.value.trim();clearTimeout(O),e.length<2?i&&i.classList.remove("active"):O=setTimeout(function(){!function(e,t){const n=document.getElementById("nav-search-results");if(!n)return;if(0===e.length)return n.innerHTML='<div class="search-no-results">'+(d||"No products found")+"</div>",void n.classList.add("active");let o=e.map(e=>'<a href="/product/'+(e.slug||e.id)+'" class="search-result-item">'+(e.images?.[0]?'<img src="'+e.images[0]+'" alt="'+e.name+'" class="search-result-img">':'<div class="search-result-img"></div>')+'<div class="search-result-info"><div class="search-result-name">'+e.name+'</div><div class="search-result-price">'+p+e.price+"</div></div></a>").join("");H.filter(e=>e.name?.toLowerCase().includes(t.toLowerCase())).length>6&&(o+='<a href="/products?search='+encodeURIComponent(t)+'" class="search-view-all">'+(v||"View all results")+" â†’</a>"),n.innerHTML=o,n.classList.add("active")}(N(e),e)},200)}),o&&o.addEventListener("click",function(){const e=n.value.trim();e.length>=2&&(window.location.href="/products?search="+encodeURIComponent(e))}),n.addEventListener("keypress",function(e){if("Enter"===e.key){const e=this.value.trim();e.length>=2&&(window.location.href="/products?search="+encodeURIComponent(e))}}),document.addEventListener("click",function(e){i&&!e.target.closest(".nav-search-box")&&i.classList.remove("active")}),"/products"===window.location.pathname)){const e=new URLSearchParams(window.location.search).get("search");e&&(n.value=e,function(e){const t=document.getElementById("zappy-product-grid");if(!t)return;setTimeout(function(){const n=t.querySelectorAll(".product-card"),o=e.toLowerCase();let i=0;if(n.forEach(function(e){const t=e.querySelector("h3")?.textContent?.toLowerCase()||"",n=e.querySelector("p")?.textContent?.toLowerCase()||"",a=t.includes(o)||n.includes(o);e.style.display=a?"":"none",a&&i++}),0===i){const e=document.createElement("div");e.className="empty-cart",e.textContent=d||"No products found",e.id="search-no-results",t.appendChild(e)}},500)}(e))}}function $(){const e=[".nav-menu",".mobile-menu",".mobile-nav",'[class*="mobile-menu"]','[class*="nav-menu"]',".menu-items",".nav-links","nav ul"],t=[".hamburger",".menu-toggle",".nav-toggle",".mobile-toggle",'[class*="hamburger"]','[class*="menu-toggle"]',".menu-btn",'button[aria-label*="menu"]',".mobile-menu-btn"];let n=null,o=null;for(const t of e)if(n=document.querySelector(t),n)break;for(const e of t)if(o=document.querySelector(e),o)break;function i(){return!!n&&(n.classList.contains("active")||n.classList.contains("open")||n.classList.contains("show")||n.classList.contains("visible")||n.classList.contains("is-open"))}function a(){if(!n)return;n.classList.remove("active","open","show","visible","is-open","menu-open"),document.body.classList.remove("menu-open","nav-open","mobile-menu-open");const e=n.closest("nav")||n.closest("header");e&&e.classList.remove("active","open","show","menu-open","is-open"),o&&(o.classList.remove("active","open","is-active"),o.setAttribute("aria-expanded","false"));const t=document.querySelector(".mobile-menu-overlay");t&&t.remove()}let c=i();setInterval(function(){const e=i();if(e!==c)if(c=e,e){if(!document.querySelector(".mobile-menu-overlay")){const e=document.createElement("div");e.className="mobile-menu-overlay",e.style.cssText="position:fixed;inset:0;background:rgba(0,0,0,0.3);z-index:998;",e.addEventListener("click",function(){o?o.click():a()}),document.body.appendChild(e)}}else{const e=document.querySelector(".mobile-menu-overlay");e&&e.remove()}},100),document.querySelectorAll("nav a, .nav-menu a, .mobile-menu a").forEach(function(e){e.addEventListener("click",function(){setTimeout(a,100)})}),document.querySelectorAll(".nav-ecommerce-icons a, .cart-link, .login-link").forEach(function(e){e.addEventListener("click",function(){a()})}),document.addEventListener("click",function(e){if(n&&o&&i()){const t=n.contains(e.target),i=o.contains(e.target);t||i||a()}}),document.addEventListener("keydown",function(e){"Escape"===e.key&&a()}),window.zappyCloseMobileMenu=a}function R(){const e=document.getElementById("mobile-search-toggle"),t=document.getElementById("mobile-search-panel"),n=document.getElementById("close-mobile-search"),o=document.getElementById("mobile-search-input"),i=document.getElementById("mobile-search-results");e&&t&&(e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.classList.add("active"),setTimeout(function(){o&&o.focus()},100)}),n&&n.addEventListener("click",function(){t.classList.remove("active"),o&&(o.value=""),i&&(i.innerHTML="")}),o&&(o.addEventListener("input",function(){const e=this.value.trim();clearTimeout(O),e.length<2?i&&(i.innerHTML=""):O=setTimeout(function(){!function(e,t){const n=document.getElementById("mobile-search-results");if(!n)return;if(0===e.length)return void(n.innerHTML='<div class="search-no-results">'+(d||"No products found")+"</div>");let o=e.slice(0,8).map(function(e){const t=formatPrice(e.price),n=e.images&&e.images[0]?e.images[0]:"";return'<a href="/product/'+e.slug+'" class="search-result-item">'+(n?'<img src="'+n+'" alt="'+e.name+'" class="search-result-img">':"")+'<div class="search-result-info"><div class="search-result-name">'+e.name+'</div><div class="search-result-price">'+t+"</div></div></a>"}).join("");e.length>8&&(o+='<a href="/products?search='+encodeURIComponent(t)+'" class="search-view-all">'+(v||"View all results")+" ("+e.length+")</a>");n.innerHTML=o}(N(e),e)},200)}),o.addEventListener("keypress",function(e){if("Enter"===e.key){const e=this.value.trim();e.length>=2&&(window.location.href="/products?search="+encodeURIComponent(e))}})),document.addEventListener("click",function(e){!t.classList.contains("active")||e.target.closest("#mobile-search-panel")||e.target.closest("#mobile-search-toggle")||t.classList.remove("active")}))}function U(){C(),async function(){const n=document.getElementById("zappy-product-grid");if(n)try{window.location.pathname;const o=new URLSearchParams(window.location.search),i=o.get("page");if(i){const e=new URL(i,window.location.origin).searchParams.get("category")||o.get("category");e&&o.set("category",e)}const a=o.get("category");let c=t("/api/ecommerce/storefront/products?websiteId="+e);a&&(c+="&categoryId="+a);const s=await fetch(c),l=await s.json();if(!l.success||!l.data?.length)return void(n.innerHTML='<div class="empty-cart">'+d+"</div>");n.innerHTML=l.data.map(e=>'<div class="product-card"><a href="/product/'+(e.slug||e.id)+'" class="product-card-link">'+(e.images?.[0]?'<img src="'+e.images[0]+'" alt="'+e.name+'">':'<div style="height:200px;background:#f0f0f0;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#999;">ğŸ“¦</div>')+"<h3>"+e.name+"</h3><p>"+(e.description||"").substring(0,100)+'</p><div class="price">'+p+e.price+'</div></a><button class="add-to-cart" onclick="event.stopPropagation(); window.zappyAddToCart('+JSON.stringify(e).replace(/"/g,"&quot;")+')">'+r+"</button></div>").join("")}catch(e){console.error("Failed to load products",e),n.innerHTML='<div class="empty-cart">'+l+"</div>"}}(),T(),async function(){const n=document.getElementById("shipping-methods");if(n)try{const o=await fetch(t("/api/ecommerce/storefront/shipping?websiteId="+e)),i=await o.json();if(x=i.data||[],!x.length)return void(n.innerHTML='<div class="no-shipping">'+(g||"No shipping options available")+"</div>");n.innerHTML=x.map((e,t)=>{const n=e.is_pickup,o=0===parseFloat(e.price),i=e.conditions?.freeAbove&&z()>=e.conditions.freeAbove,a=o||i?m||"FREE":p+e.price,c=e.estimated_days?" ("+e.estimated_days+" "+u+")":"",r=n?"ğŸ“ ":"ğŸšš ",s=n&&e.pickup_address?.street?'<div class="shipping-address">'+e.pickup_address.street+", "+(e.pickup_address.city||"")+"</div>":"",d=e.conditions?.freeAbove&&!i?'<div class="shipping-free-note">'+(y||"Free above")+" "+p+e.conditions.freeAbove+"</div>":"";return'<label class="shipping-option'+(0===t?" selected":"")+'" data-method-id="'+e.id+'"><input type="radio" name="shipping" value="'+e.id+'"'+(0===t?" checked":"")+' onchange="window.zappySelectShipping(this.value)"><div class="shipping-info"><div class="shipping-name">'+r+e.name+c+"</div>"+(e.description?'<div class="shipping-desc">'+e.description+"</div>":"")+s+d+'</div><div class="shipping-price'+(o||i?" free":"")+'">'+a+"</div></label>"}).join(""),x.length>0&&(S=x[0],j())}catch(e){console.error("Failed to load shipping methods",e),n.innerHTML='<div class="error">'+(l||"Error loading options")+"</div>"}}(),async function(){const n=document.getElementById("payment-container");if(n)try{const o=await fetch(t("/api/ecommerce/storefront/payment-status?websiteId="+e)),i=await o.json();if(q=i.data?.isConfigured||!1,A=i.data?.methods||[],!q||!A.length)return void(n.innerHTML='<div class="payment-not-configured"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg><span>'+(E?"×ª×©×œ×•× ××§×•×•×Ÿ ×œ× ××•×’×“×¨. ×¦×¨×• ×§×©×¨ ×¢× ×‘×¢×œ ×”××ª×¨.":"Online payment not configured. Please contact the store owner.")+"</span></div>");n.innerHTML=A.map((e,t)=>{const n=E?e.name:e.nameEn,o="credit-card"===e.icon?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>':"";return'<label class="payment-option'+(0===t?" selected":"")+'" data-method-id="'+e.id+'"><input type="radio" name="payment" value="'+e.id+'"'+(0===t?" checked":"")+' onchange="window.zappySelectPayment(this.value)"><div class="payment-info"><div class="payment-icon">'+o+'</div><div class="payment-name">'+n+"</div></div></label>"}).join(""),A.length>0&&(M=A[0])}catch(e){console.error("Failed to load payment methods",e),n.innerHTML='<div class="error">'+(l||"Error loading options")+"</div>"}}(),j(),D(),R(),$(),function(){if(window.innerWidth>768)return;const e=document.querySelectorAll('a[href="/products"], a[href*="/products"]');if(!e.length)return;const n=document.getElementById("zappy-category-links");let o=[];if(n){n.querySelectorAll("a").forEach(function(e){o.push({name:e.textContent.trim(),href:e.href})})}if(0===o.length){const n=window.ZAPPY_WEBSITE_ID;n&&fetch(t("/api/ecommerce/"+n+"/categories")).then(function(e){return e.json()}).then(function(t){t.categories&&t.categories.length>0&&(o=t.categories.map(function(e){return{name:e.name,href:"/products?category="+e.id}}),Z(e,o))}).catch(function(){})}else Z(e,o)}(),function(){document.querySelectorAll("#cart-drawer-toggle, [data-cart-toggle], .cart-link.nav-cart, a.nav-cart").forEach(function(e){e.hasAttribute("data-cart-init")||(e.setAttribute("data-cart-init","true"),e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),B()}))});var e=document.getElementById("cart-drawer-close");e&&e.addEventListener("click",P);var t=document.getElementById("cart-drawer-overlay");t&&t.addEventListener("click",P),document.addEventListener("keydown",function(e){"Escape"===e.key&&P()}),I()}(),function(){const n=document.getElementById("place-order-btn");n&&n.addEventListener("click",async function(o){if(o.preventDefault(),!k||0===k.length)return void alert(E?"×”×¢×’×œ×” ×¨×™×§×”":"Cart is empty");if(!S)return void alert(E?"× × ×œ×‘×—×•×¨ ×©×™×˜×ª ××©×œ×•×—":"Please select a shipping method");if(!q||!M)return void alert(E?"×ª×©×œ×•× ××§×•×•×Ÿ ×œ× ××•×’×“×¨. ×¦×¨×• ×§×©×¨ ×¢× ×‘×¢×œ ×”××ª×¨.":"Online payment not configured. Please contact the store owner.");const i=document.getElementById("customer-name")?.value?.trim()||"",a=document.getElementById("customer-email")?.value?.trim()||"",r=document.getElementById("customer-phone")?.value?.trim()||"";if(!i||!a)return void alert(E?"× × ×œ××œ× ×©× ×•××™××™×™×œ":"Please fill in name and email");const s=document.getElementById("shipping-street")?.value?.trim()||"",d=document.getElementById("shipping-city")?.value?.trim()||"",l=document.getElementById("shipping-zip")?.value?.trim()||"";if(S.is_pickup||s&&d){n.disabled=!0,n.innerHTML=E?"××¢×‘×“...":"Processing...";try{let n=localStorage.getItem("zappy_session_id");n||(n="sess_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),localStorage.setItem("zappy_session_id",n));const o=await fetch(t("/api/ecommerce/checkout/init"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:e,sessionId:n,customerEmail:a,customerName:i,customerPhone:r,shippingAddress:{street:s,city:d,zip:l},shippingMethodId:S.id,cart:k,couponCode:_?_.code:null,couponDiscount:F})}),c=await o.json();if(!c.success||!c.data?.checkoutUrl)throw new Error(c.error||"Checkout initialization failed");window.location.href=c.data.checkoutUrl}catch(e){console.error("Checkout failed:",e),alert(E?"×©×’×™××” ×‘×ª×”×œ×™×š ×”×ª×©×œ×•×. × ×¡×• ×©×•×‘.":"Checkout failed. Please try again."),n.disabled=!1,n.innerHTML=c||(E?"×‘×¦×¢ ×”×–×× ×”":"Place Order")}}else alert(E?"× × ×œ××œ× ×›×ª×•×‘×ª ×œ××©×œ×•×—":"Please fill in shipping address")})}(),function(){const n=document.getElementById("apply-coupon-btn"),o=document.getElementById("remove-coupon-btn"),i=document.getElementById("coupon-code-input");n&&i&&(n.addEventListener("click",async function(){const o=i.value.trim();if(o){n.disabled=!0,n.textContent="...";try{const n=z(),i=await fetch(t("/api/ecommerce/storefront/validate-coupon"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:e,code:o,subtotal:n})}),a=await i.json();if(!a.success||!a.data?.valid){const e=document.getElementById("coupon-error");let t=h||"Invalid coupon code";return"expired"===a.data?.error?t=w||"Coupon has expired":"min_order"===a.data?.error&&(t=(b||"Minimum order amount")+": "+p+a.data.minOrderAmount),void(e&&(e.textContent=t,e.style.display="block",setTimeout(function(){e.style.display="none"},5e3)))}_=a.data.coupon,F=_.discountAmount||0,document.getElementById("coupon-input-row").style.display="none",document.getElementById("coupon-applied-row").style.display="flex",document.getElementById("applied-coupon-code").textContent=_.code,document.getElementById("coupon-error").style.display="none",j()}catch(e){console.error("Failed to validate coupon",e);const t=document.getElementById("coupon-error");t&&(t.textContent=l||"Error",t.style.display="block")}finally{n.disabled=!1,n.textContent=f||"Apply"}}}),i.addEventListener("keypress",function(e){"Enter"===e.key&&(e.preventDefault(),n.click())}),o&&o.addEventListener("click",function(){_=null,F=0,document.getElementById("coupon-input-row").style.display="flex",document.getElementById("coupon-applied-row").style.display="none",document.getElementById("coupon-code-input").value="",j()}))}()}function Z(e,t){t.length&&e.forEach(function(e){if(e.parentElement.querySelector(".mobile-categories-submenu"))return;if(!e.closest('.nav-menu, .mobile-menu, .mobile-nav, [class*="mobile"], [class*="nav-menu"]'))return;const n=document.createElement("div");n.className="mobile-categories-submenu",n.innerHTML=t.map(function(e){return'<a href="'+e.href+'">'+e.name+"</a>"}).join("");const o=e.innerHTML;e.innerHTML='<span class="products-menu-toggle">'+o+"</span>",e.classList.add("products-menu-item"),e.parentElement.insertBefore(n,e.nextSibling),e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();const o=e.querySelector(".products-menu-toggle");o&&o.classList.toggle("active"),n.classList.toggle("active")})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",U):U()}(),document.addEventListener("DOMContentLoaded",function(){loadFeaturedProducts(),loadCatalogCategories(),loadProductDetailPage()});